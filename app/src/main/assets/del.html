<!DOCTYPE HTML>
<html>
<head>
<meta  charset="utf-8" name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no, minimum-scale=1.0, maximum-scale=1.0"/>
<script src="./jquery.min.js"></script>
<script language="JavaScript" type="text/javascript" src="./jsku.js"></script>
<script language="JavaScript" type="text/javascript" src="./yin_biao_ku.js"></script>
<title>管理打卡</title>
<link href="./nh.css" rel="stylesheet" type="text/css">
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<style type="text/css">
<!--
body {
	background-color: #F4F4F4;
}
-->
</style>
</head>
<body onLoad="li_biao()">
<div class="web">
  <div class="nei_rong">

    <!--内容动态卡片开始-->
<div class="a3_list_card">
<!--左边-->        <div class="a3_left" onClick="window.history.back()"><img src="images/jiantou.png" alt="<"></div>
<!--中间 -->	  	  <div class="a3_center">管理打卡</div>
<!--右边-->	      <div class="a3_right" onClick="about_html()"><img src="images/ping3.png" alt="..."></div>

	  
	  </div>
           <div id="ming_cheng_html"></div>
  
    <!--内容动态卡片结束-->
<!--可以加代码，不会超出屏幕-->
<div class="down_bar_ding"></div>

</div> <!-- class="nei_rong" 结束-->

<!--不能加代码，否则bar会超出屏幕-->
<!--弹窗开始-->
<div id="yin_ying">
<div id="tan_chuang"><div class="tan_chuang_title" onClick="no_del_html()">取消删除</div>
      <div id="tc_nr_id" class="tan_chuang_nei_rong"></div><div id="yes_del_html"></div>
</div></div>
<!--弹窗结束-->

 <div id="tabbar">
    <table width="100%" border="0" cellpadding="0" cellspacing="0" class="an_niu">
      <tr>
        <td nowrap="nowrap" onClick="home_html()">
         <img class="icon" src="images/home_off.png" alt="首页">
		  <div class="css_buttonr_bar" style="color:#FF9900">首页</div>
          </td>
        <td nowrap="nowrap" onClick="del_html()">
                   <img class="icon" src="images/del.png" alt="删除">
<div class="css_buttonr_bar">删除</div>
          </td>
        <td nowrap="nowrap" onClick="add_html()">
				                   <img class="icon" src="images/add_off.png" alt="添加">

          <div class="css_buttonr_bar">添加</div>
          </td>
        <td nowrap="nowrap" onClick="history_html()">
		                   <img class="icon" src="images/history_off.png" alt="记录">
          <div class="css_buttonr_bar">记录</div>
          </td>
        <td nowrap="nowrap" onClick="about_html()">		                  
		 <img class="icon" src="images/about_off.png" alt="我的">

          <div class="css_buttonr_bar"> 我的</div>
          </td>
      </tr>
    </table>
       </div> <!--id="tabbar"结束-->
</div><!-- class="web" 结束-->

<script type="text/javascript">



 // 声明变量

      var 
	      date = new Date(),//日期
		  day = date.getDate(),//日
	      s = window.localStorage,
          len = localStorage.length,
		  ming_cheng_bl = "",
		  
		  
		  yes_del_left = "<div class=guan_bi onClick=yes_del_html('",
		  yes_del_right = "')>确定删除</div>",
		  
		  state_png = "nodk",
  		  card_left = "<div class=yin_cang><div class=box_card_del id=card onClick=del('",
	      card_centent = "')>",
		  card_right = "</div></div>",
		  dk_name_left = "<div class=item100 style=color:#aaaaaa>",
		  dk_name_right = "</div>",
		  zuo_day_left = "<div class=item10 style=color:#ff9900>",
		  zuo_day_right = "</div>",
		  jian_name_left = "<div class=item12 onclick=yes_del_html('",
		  jian_name_right = "')>",
		  dk_png_left = "<img src=./images/",
		  dk_png_right = ".png alt=删除></div>",
// 条件语句如果日期相同则不改变，否则写入100 SZ()含义是转换成数字类型
          ri_qi_today = day,
	      ri_qi_today_sz = sz(ri_qi_today);       
//音效变量
          yin_xiao_bl = document.getElementById("myAudio"); 
		 
// 点击启动列表函数开始 li_biao 列表的缩写
      function li_biao() { 


// s.key(i)	是获得键名   s.getItem(s.key(i)) 是获得键值  sz(ri_qi_sg) 意思是转换成数值类型

// qd函数是签到缩写
// 循环1开始	  

      for(var i = 0; i <len; i++) {
	  
	  //下滑弹出动画开始
	$(document).ready(function(){
	$("#box_card+i").slideDown("slow");});
//下滑弹出动画结束

	  
   var        
	  ri_qi_sg = s.getItem(s.key(i)),
	  ri_qi_sg_sz = sz(ri_qi_sg),
 // 获取键名
jian_ming = s.key(i);
//获取键名里zuo_ri的位置在第几位
zuo_ri_len = jian_ming.search(/zuo_ri/i);



//条件语句开始 没有签到的

	 if (ri_qi_sg_sz != ri_qi_today_sz && zuo_ri_len<1){
//NODK 缩写 没有打卡	  
	  var state_png = "del_item";
	        ming_cheng_bl += card_left+s.key(i)+card_centent+dk_name_left  + s.key(i).substring(0,22)+dk_name_right + zuo_day_left +"<img src=images/zuo_day_status.png alt=没有打卡>今日未打卡"+zuo_day_right + jian_name_left +s.key(i)+ jian_name_right +dk_png_left  + state_png + dk_png_right +card_right;  

      xs("ming_cheng_html").innerHTML = ming_cheng_bl;  


//条件语句结束 没有签到的
};	  

	  

//循环1结束
};

// 循环2开始	  

      for(var i = 0; i <len; i++) {
	

	  
   var        
	  ri_qi_sg = s.getItem(s.key(i)),
	  ri_qi_sg_sz = sz(ri_qi_sg),
// 获取键名
jian_ming = s.key(i),
//获取键名里zuo_ri的位置在第几位
zuo_ri_len = jian_ming.search(/zuo_ri/i);



// 条件语句开始 已经签到的		
      if (ri_qi_sg_sz == ri_qi_today_sz && zuo_ri_len<1)

      {
	  var state_png = "del_item";
//yesdk 缩写 已经打卡	  	  

	  
	  ming_cheng_bl += card_left+s.key(i)+card_centent + dk_name_left  + s.key(i).substring(0,22)+dk_name_right + zuo_day_left +"<img src=images/zuo_day_status_on.png alt=已经打卡>今日已打卡"+zuo_day_right + jian_name_left +s.key(i)+ jian_name_right +dk_png_left  + state_png + dk_png_right +card_right;  

      xs("ming_cheng_html").innerHTML = ming_cheng_bl; 
	  
 

};
//条件语句结束 已经签到的

//下滑弹出动画开始 支持根据ID或CSS控制动画
	$(document).ready(function(){
	$(".yin_cang").slideDown("slow");});
//下滑弹出动画结束


//循环2结束
};


// li_biao函数结束
};

//点击X删除图标函数开始 
// a的含义是通过函数qd传递过来的值
     function del(a) {
	 

	 
 
 // 创建音效对象
var audio = new Audio('./yin_xiao_del.wav');

// 播放音效
audio.play();


// 延时250毫秒刷新页面
	//setTimeout(function (){location.reload()},250);
 
 // 弹窗内容
	
 tc_nr = a;

 // 将弹窗内容显示到ID为 TC_NR_ID的元素里

	document.getElementById('tc_nr_id').innerHTML = tc_nr
	
	
	 		//阴影透明背景
  var bgObj=document.getElementById("yin_ying");
  bgObj.style.width = document.body.offsetWidth + "px";
  bgObj.style.height = screen.height + "px";  


	
	
//	弹出按钮窗口
	$(document).ready(function(){
    $("#yin_ying").slideDown("slow");
});


//////////////////////////////////////////////////////////////////////////////////////////////////////////////////

//获取键名值给 yes_del_html_bl 这个变量 确认删除按钮

        yes_del_html_bl = yes_del_left +a+ yes_del_right;
		
//将yes_del_html_bl 里面的键名写入 网页ID为yes_del_html的DIV里

       xs("yes_del_html").innerHTML = yes_del_html_bl;


//////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//弹窗结束

     };
//点击X删除图标函数结束

function no_del_html() {
//	收回按钮
	$(document).ready(function(){
    $("#yin_ying").slideUp("slow");
});

}

function yes_del_html(a) {

//将函数del获得的键名和值删除还有zuo_ri也一同删除	 a 是获取的键名
	 s.removeItem(a);
	 s.removeItem(a+"zuo_ri");
	 location.reload()
};

</script>
</body>
</html>
